(function(a){BitRange=function(s){var C=s||{},b=$(C.range),l=C.value||{min:0,max:100},y=C.step*1||0,n=C.point*1||0,i=C.path||"",u=C.slide,q=C.delay||10,z,w=$(this),d=typeof l.max=="object"?l.max.length:1,e=$('<div class="range_wrap" data-ratio="0" tabindex="0"><div class="range_paths_wrap"></div><div class="range_track_wrap"><div class="range_track"></div><div class="range_handle"></div></div><div class="range_points_wrap"></div></div>'),x='<div class="range_path"></div>',p='<div class="range_point"></div>',j,f=$(document);e.trackWrap=e.find(".range_track_wrap");e.track=e.find(".range_track");e.handle=e.find(".range_handle");e.paths=e.find(".range_paths_wrap");e.points=e.find(".range_points_wrap");e.ratio=0;if(b.length<=0){return}D();function D(){b.append(e);b._width="100%";b._left=b.offset().left;j=b._width-e.handle.width()/2;e.trackWrap.width(j);e.points.width(j);if(n){v()}A()}function B(G,H){var E=G;for(var F=0;F<H-1;F++){E+=G}return $(E)}function A(){x=B(x,d);e.paths.append(x)}function v(){var E=100/n,F=0;p=B(p,n+1);p.each(function(G,H){$(H).css("left",F+"%").attr("data-point-ratio",F);F+=E});e.points.append(p)}function m(F,E){e.ratio=F.pageX?t(F.pageX):F;if((e.is(":focus")||e.hasClass("click"))&&w.rangeMouseup){e.trigger("__rangeSlide",[E])}}function t(E){b._width=b.width()||b.parent().width()||b.parent().parent().width();var F=r((E-b._left)/b._width*100);return k(F)}function k(E){if(E<=0){E=0}else{if(E>=100){E=100}}return E}function r(G){var E=(G-0)%y,F=G-E;return parseFloat(y?F.toFixed(5):G.toFixed(5))}function h(E){if(!w._delayMet){E&&E();w._Delay=setTimeout(function(){w._delayMet=false},q);w._delayMet=true}}function c(){e.handle.css({left:e.ratio+"%"});e.track.css({width:e.ratio+"%"});e.attr("data-ratio",e.ratio);p.each(function(E,H){var F=$(H),G=$(H).data("point-ratio");e.ratio>=G?F.addClass("active"):F.removeClass("active")})}function o(E,F){if(E!==undefined){e.ratio=k(r(E))}if(F){e.trigger("__rangeSlide")}c()}function g(){e.ratio=0;c()}f.mousemove(function(E){h(function(){if(!w.rangeMouseup){return}m(E)})});e.mousedown(function(F){e.trigger("focus");w.rangeMouseup=true;var G=F.target.getAttribute("data-point-ratio"),E=F.target==e.handle[0];if(G){w.pointDown=true;E?m(G*1,0):m(G*1)}else{w.pointDown=false;E?m(F,0):m(F)}e.addClass("click");if(typeof(document.onselectstart)!="undefined"){document.onselectstart=new Function("return false")}});e.hover(function(){e.addClass("hover");b._left=b.offset().left},function(){e.removeClass("hover")});f.mouseup(function(){w.rangeMouseup=false;e.removeClass("click");if(typeof(document.onselectstart)!="undefined"){document.onselectstart=new Function("return true")}});e.on("__rangeSlide",function(F){var E=F!==undefined?F:true;c();z=e.ratio;F&&u&&u(z,b)}).on("focus",function(){e.addClass("focus")}).on("blur",function(){e.removeClass("focus")}).on("keydown",function(E){switch(E.which){case 37:E.shiftKey?e.ratio-=10:e.ratio--;break;case 39:E.shiftKey?e.ratio+=10:e.ratio++;break;default:return}m(k(e.ratio));c();z=e.ratio;u&&u(z,b)});$(a).on("resize",function(){b._width="100%";b._left=b.offset().left;j=b._width-e.handle.width()/2;e.trackWrap.width(j);e.points.width(j)});this.Range=e;this.Update=o;this.Reset=g};"function"==typeof define?define(function(){return BitRange}):"undefined"!=typeof exports?module.exports=BitRange:a.BitRange=BitRange})(window);