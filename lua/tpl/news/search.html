<!DOCTYPE html>
<html dir="ltr" lang="zh-CN" ng-app ="app" ng-controller="Ctrl">
{%
local ck = require "resty.cookie"
local cookie, err = ck:new()
if not cookie then
ngx.log(ngx.ERR, err)
return
end
local lang, err = cookie:get("lang")
if not lang then
lang="cn"
local param = { key = "lang", value = lang, path = '/', max_age = 60 * 60 * 24 * 365 }
cookie:set(param)
end

--lang="cn"
--local param = { key = "lang", value = lang, path = '/', max_age = 60 * 60 * 24 * 365 }
--cookie:set(param)

context.lang = lang
context.otherLang = lang == "en" and "cn" or "en"
%}
<head>
    <meta charset="utf-8">
    <title>Bilaxy</title>
    <link rel="stylesheet" type="text/css" href="{+resources+}/dist/css/common/reset.css">
    <link rel="stylesheet" type="text/css" href="{+resources+}/dist/css/nance//global.css">
    <link rel="stylesheet" type="text/css" href="{+resources+}/dist/css/nance//trade.css">
    <link rel="stylesheet" type="text/css" href="{+resources+}/dist/css/news_list.css">
    <link rel="stylesheet" type="text/css" href="{+resources+}/dist/css/common/style.css">
    <script src="{+resources+}/dist/js/angular.min.js"></script>
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
</head>
<body class="">
{(tpl/common/news_header.html)}
<main role="main" ng-controller="searchCtrl">
    <div class="container-divider"></div>
    <div class="container">
        <nav class="sub-nav">
            <ol class="breadcrumbs">
                <li title="Bibox">
                    <a href="/news" target="_self">Bilaxy</a>
                </li>
                <li title="\{{lang.searchresult}}" ng-cloak="">
                    \{{lang.searchresult}}
                </li>
            </ol>
            <form role="search" class="search"  action="/news/search" accept-charset="UTF-8" method="get">
                <input type="search" name="keyWord"  placeholder="\{{lang.search}}" autofocus="autofocus"  />
            </form>
        </nav>
        <header class="page-header" ng-cloak="">
            <h1>\{{lang.searchresult}}</h1>
            <p class="page-header-description">"\{{keyWord}}"
                <span ng-bind="lang.result1"></span>\{{total}}
                <span ng-bind="lang.count1"></span>
            </p>
        </header>

        <div class="search-results">
            <section class="search-results-column">
                <h3 class="search-results-subheading" ng-bind="lang.zhishiku">
                </h3>
                <ul class="search-results-list" ng-repeat="row in list" ng-cloak="" style="margin-bottom: 0px">
                    <li style="text-align: left;border-top:0px solid #ddd">
                        <a  target="_self" style="color:#0072ef;" href="/news/detail?id=\{{row.id}}" class="search-result-link" ng-bind="row.showTitle"></a>
                        <ul class="meta-group">
                            <li class="meta-data" ng-bind="lang.last_update"></li>
                            <li class="meta-data" ng-bind="row.createDate | date:'yyyy-MM-dd HH:mm'"></li>
                        </ul>
                        <div class="search-result-description" ng-show="row.hasContent">
                           <em >\{{keyWord}}</em>
                            \{{row.showContent}}
                        </div>
                    </li>
                </ul>
            </section>
        </div>

        <nav class="pagination" ng-show="total > 0" ng-cloak="">
            <ul>
                <li class="" ng-click="loadList(p)" ng-class="p == currency_page?'pagination-current':'' "  ng-repeat="p in all_pages">
                    <span style="margin-left: -1px">\{{p}}</span>
                </li>
                <li class="pagination-next" ng-show="totalPage > 1" >
                    <a href="" ng-click="loadList(currency_page + 1)" rel="next">›</a>
                </li>
                <li class="pagination-last" ng-show="totalPage > 1">
                    <a href="" ng-click="loadList(totalPage)">»</a>
                </li>
            </ul>
        </nav>

    </div>

</main>

{(tpl/common/footer.html)}
<script src="{+resources+}/dist/js/news/search.js?v={{version}}"></script>
</body>
</html>